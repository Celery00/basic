<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1">
	<title></title>
  <!-- css引入 -->
	<link rel="stylesheet" href="mpicker.css">
</head>
<body>

<h4>单级选择</h4>
<input type="text" class="select-value3 form-control" value="" readonly="readonly">
<h4>二级城市联动选择</h4>
<input type="text" class="city2_value" value="" readonly="readonly" placeholder="意向合作省市" style="transform: translateY(0px);">
<h4>自定义二级联动选择</h4>
<input type="text" class="custom_value" value="" readonly="readonly" placeholder="意向合作省市" style="transform: translateY(0px);">



<pre>//模拟数据都在json.js里
两级联动选择插件调用：
$('.select-value1').mPicker({
    //级别
    level:2,
    //需要渲染的json，二级联动的需要嵌套子元素，有一定的json格式要求
    dataJson:dataJson,
    //true:联动
    Linkage:true,
    //显示行数
    rows:6,
    //默认值填充
    idDefault:true,
    //分割符号
    splitStr:'-',
    //头部代码
    header:'&lt;\div class="mPicker-header"&gt;两级联动选择插件&lt;\/div&gt;',
    confirm:function(){
        //更新json
        this.container.data('mPicker').updateData(level3);
        //console.info($('.select-value').data('value1')+'-'+$('.select-value').data('value2'));
    },
    cancel:function(){
        //console.info($('.select-value').data('value1')+'-'+$('.select-value').data('value2'));
    }
})
//返回的实例对象，
//包含showPicker,hide,updateData等方法
// var method= $('.select-value').data('mPicker');
// console.info(method)
// method.showPicker();
// method.hide(function(){
//     console.info(this)
// });
  </pre>
<!-- js引入 -->
<script src="https://cdn.bootcss.com/jquery/3.1.0/jquery.min.js"></script>
<script src="js/json.js"></script>
<script src="js/mPicker.min.js"></script>

<script chartset="UTF-8">
	$(function () {
        /**
         * 一级
         */
        var method3=$('.select-value3').mPicker({
            level:1,
            dataJson:dataJson,
            Linkage:false,
            rows:6,
            idDefault:true,
            header:'<div class="mPicker-header">单级选择</div>',
            confirm:function(json){
                console.info('当前选中json：', json);
            },
            cancel:function(json){
                console.info('当前选中json：', json);
            }
        })


		    /**
         * 联动的picker--添加修改后修改数据的效果
         * 两级
         */
        $('.city2_value').mPicker({
            level: 2,
            dataJson: dataJson,
            Linkage: true,
            rows: 6,
            idDefault: true,
            splitStr: '-',
            header: '<div class="mPicker-header">意向合作省市</div>',
            confirm: function (json) {
                // console.info('当前选中json：', json);
                // var _this= this;
                // console.info('【json里有带value的情况】');
                //更新json
                // console.info('3s后更新json...');
                // setTimeout(function(){
                //     _this.container.data('mPicker').updateData.call(_this,level3);
                    // var json = getVal();
                //     var valArr = json.value;
                //     console.info('更新成功!!');
                //     console.info('更新后的value为空', valArr[0], valArr[1]);
                //     console.info('更新后的value拼接值为空', json.result);
                // },3000);
                
            },
            cancel: function (json) {
            }
		})


        //自定义二级联动数据
		$('.custom_value').mPicker({
            level: 2,
            dataJson: customLevel2,
            Linkage: true,
            rows: 6,
            idDefault: true,
            splitStr: '-',
            header: '<div class="mPicker-header">意向合作省市</div>',
            confirm: function (json) {

                
            },
            cancel: function (json) {
            }
		})

    })

</script>
</body>
</html>